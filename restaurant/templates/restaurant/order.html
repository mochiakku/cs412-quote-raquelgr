{% extends 'restaurant/base.html' %}

{% block content %}
<div>
    <h1>Place an order</h1>

    <form action="{% url 'confirmation' %}" method="POST">
        <!-- The CSRF token will be used to verify the authenticity of 
         this form so that we cannot submit a form that wasn't 
         generated by this app. -->
        {% csrf_token %}
        <h2>Select your items: </h2>
        {% for dish in dishes %}
        {% if dish.extras %}
        <input type="checkbox" id="checkbox-{{ dish.name|slugify }}" name="ordered_items" value="{{ dish.name }}"
            onclick="toggleExtras('{{ dish.name|slugify }}')">
        {{ dish.name }} - ${{ dish.price }} Extra options<br>

        <div id="extras-{{ dish.name|slugify }}" style="display:none; margin-left: 20px;">
            {% for extra in dish.extras %}
            <input type="checkbox" name="ordered_extra" value="{{ extra }}"> {{ extra }} $1<br>
            {% endfor %}
        </div>
        {% else %}
        <input type="checkbox" name="ordered_items" value="{{ dish.name }}">
        {{ dish.name }} - ${{ dish.price }}<br>
        {% endif %}
        {% endfor %}
        <h2>Today's special:</h2> <input type="checkbox" name="daily_special" value="true">{{ daily_special.name }} - $3

        <h2>Additional Comments/Special Instructions</h2>
        <textarea id="comments" name="comments" rows="5" cols="50"></textarea></br>
        <h2>Customer Information</h2>
        <label for="name">Name:</label>
        <input type="text" id="name" name="name"><br><br>
        <label for="phone">Phone:</label>
        <input type="text" id="phone" name="phone"><br><br>
        <label for="email">Email:</label>
        <input type="text" id="email" name="phone"><br><br>
        <input type="submit">
    </form>
</div>
<script>
    function toggleExtras(dishId) {
        var checkbox = document.getElementById("checkbox-" + dishId);
        var extrasDiv = document.getElementById("extras-" + dishId);

        // Show or hide the extras depending on whether the checkbox is checked
        if (checkbox.checked) {
            extrasDiv.style.display = "block";
        } else {
            extrasDiv.style.display = "none";
        }
    }
</script>
{% endblock %}